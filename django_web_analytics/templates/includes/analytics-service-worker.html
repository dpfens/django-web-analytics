<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('{% url 'serviceworker' %}')
    .then((registration) => {
      // registration worked
      console.log('Registration succeeded. Scope is ' + registration.scope);
    }).catch((error) => {
      // registration failed
      console.log('Registration failed with ' + error);
    });
    navigator.serviceWorker.ready.then(function(registration) {
      console.log(registration);
      return registration.sync.register('analytics');
    })
    .catch(function(e) {
      analytics.sync();
    });
}
</script>
